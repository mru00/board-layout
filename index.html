<!DOCTYPE html>
<html>
<head>
  	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  	<title>board layout</title>
  	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">

      	<link rel="stylesheet" type="text/css" href="//stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
      	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


	<style>
	</style>

	<script type="text/javascript" src="//code.jquery.com/jquery-git.js"></script>
      	<script type="text/javascript" src="//code.jquery.com/jquery-3.3.1.slim.min.js"></script>
      	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
      	<script type="text/javascript" src="//stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.6/svg.min.js"></script>

	<script type="text/javascript">
      $(document).ready(function() {
	      
var svg_drawing;	      
	      
function preload_values() {
	"use strict";
  	$("#thickness").val(55);
 	$("#count").val(9);
 	$("#spacing").val(35);
  	$("#margin").val(10);
}

function update_calculation() {
	"use strict";
	var thickness = + $("#thickness").val();
	var count = + $("#count").val();
	var spacing = + $("#spacing").val();
	var margin = + $("#margin").val();
	
	var width_total = thickness * count + spacing * (count -1) + 2*margin;
	var width_single = thickness + spacing;
  
	$("#width_total").val( width_total );
	$("#width_single").val( width_single );

	$('#markers > tbody').empty();
	var i;
	for (i = 0; i< count; ++i) {
		var marker1 = margin + i*(thickness + spacing);
		var marker2 = marker1 + thickness;
		$('#markers').append('<tr><td>'+(i+1)+' L</td><td>'+marker1+'</td></tr>');
		$('#markers').append('<tr><td>'+(i+1)+' R</td><td>'+marker2+'</td></tr>');
	}

	
	var w0 = 300;
	var h0 = 50;
	var x0 = 10;
	var y0 = 20;

	var transform_coord_x = function(x) {
		return x * w0 / width_total;
	};
	
	svg_drawing.rect(w0, h0).move(x0, y0);

	for (i = 0; i< count; ++i) {
		var marker1 = margin + i*(thickness + spacing);
		var marker2 = marker1 + thickness;
		svg_drawing.rect(transform_coord_x(thickness), 70).move(transform_coord_x(marker1), 10)
	}

}

$(function() {
"use strict";
	svg_drawing = SVG('drawing').size(300, 100)
	preload_values();
	update_calculation();
	$(".target").change(update_calculation);
	$("#btn-update").click(update_calculation);
	
});
});
	</script>


</head>

<body>
<div class="container">

	<h1>Calculate equidistant board layout</h1>
	You want to lay out n boards with equal width and equal spacing?
	
	<h2>Input</h2>
		
	<div class="form-group row">
		<label for="thickness" class="col-sm-2 col-form-label">thickness:</label>
   		<div class="col-sm-10">
		        <input id="thickness" type="number" placeholder="thickness" class="form-control target">
   	 	</div>
  	</div>
	<div class="form-group row">
    		<label for="spacing" class="col-sm-2 col-form-label">spacing:</label>
   		<div class="col-sm-10">
    			<input type="number" class="form-control target" id="spacing">
   	 	</div>
  	</div>
	<div class="form-group row">
    		<label for="margin" class="col-sm-2 col-form-label">margin:</label>
   		<div class="col-sm-10">
	    		<input type="number" class="form-control target" id="margin">
   	 	</div>
  	</div>
	<div class="form-group row">
    		<label for="count" class="col-sm-2 col-form-label">count:</label>
   		<div class="col-sm-10">
    			<input type="number" class="form-control target" id="count">
   	 	</div>
  	</div>    
	
	<button type="button" class="btn btn-primary" id="btn-update">Update</button>
    
	<h2>Result</h2>

	<div class="form-group row">
	  	<label for="width_total" class="col-sm-2 col-form-label">total width:</label>
		<div class="col-sm-10">
    			<input type="number" class="form-control" id="width_total">
   	 	</div>
  	</div>
	<div class="form-group row">
    		<label for="width_single" class="col-sm-2 col-form-label">width board+spacing:</label>
   		<div class="col-sm-10">
    			<input type="number" class="form-control" id="width_single">
   	 	</div>
  	</div>
	
	<h2>Markers</h2>
    	
	<div id="drawing"></div>
    	
	<table id="markers" class="table table-striped table-condensed" style="width:100%">
        	<thead>
            		<tr><th>No.</th><th>Position</th></tr>
        	</thead>
        	<tbody></tbody>
     	</table>
    
	<h2>About</h2>
	
	<a href="https://github.com/mru00/board-layout">Repository</a>

	
	</div>

	
	</body>
</html>
