<!DOCTYPE html>
<html>
<head>
  	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  	<title>board layout</title>
  	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">

      	<link rel="stylesheet" type="text/css" href="//stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
      	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


	<style>
@media print {
	
	.avoid-page-break { page-break-inside: avoid; }
	
		}
	</style>

	<script type="text/javascript" src="//code.jquery.com/jquery-git.js"></script>
      	<script type="text/javascript" src="//code.jquery.com/jquery-3.3.1.slim.min.js"></script>
      	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
      	<script type="text/javascript" src="//stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.6/svg.min.js"></script>

	<script type="text/javascript">
$(document).ready(function() {
	"use strict";
	      
	var svg_drawing;	      
	      
function preload_values() {
	"use strict";
	var thickness = 55;
	var count = 9;
	var spacing = 35;
	var margin = 10;
	if (typeof(Storage) !== "undefined") {
 		thickness = + localStorage.thickness;
 		count = + localStorage.count;
 		spacing = + localStorage.spacing;
 		margin = + localStorage.margin;
	}
	$("#thickness").val(thickness);
	$("#count").val(count);
 	$("#spacing").val(spacing);
  	$("#margin").val(margin);
}
	     	
function update_calculation() {
	var thickness = + $("#thickness").val();
	var count = + $("#count").val();
	var spacing = + $("#spacing").val();
	var margin = + $("#margin").val();
	
	if (typeof(Storage) !== "undefined") {
 		localStorage.thickness = thickness;
 		localStorage.count = count;
 		localStorage.spacing = spacing;
 		localStorage.margin = margin;
	}
	
	var width_total = thickness * count + spacing * (count -1) + 2*margin;
	var width_single = thickness + spacing;
  
	$("#width_total").val( width_total );
	$("#width_single").val( width_single );


	var svg_width = svg_drawing.viewbox().width;
	var w0 = svg_width * 0.9;
	var h0 = 50;
	var x0 = svg_width * 0.05;
	var y0 = 20;
	var board_h = 70;

	var transform_coord_x = function(x) {
		return x * w0 / width_total;
	};
		
	var line_style = { color: 'black', width: 1 };
	var fill_style_board = 'BurlyWood';
	var fill_style_single = 'NavajoWhite';
	
	svg_drawing.clear();
	
	svg_drawing.rect(w0, h0)
		.move(x0, y0)
		.fill(fill_style_single)
		.stroke(line_style);
	
	$('#markers > tbody').empty();
	
	var i;
	for (i = 0; i< count; ++i) {
		var marker1 = margin + i*(thickness + spacing);
		var marker2 = marker1 + thickness;
		$('#markers').append('<tr><td>'+(i+1)+'</td><td>'+marker1+'</td><td>'+marker2+'</td></tr>');

		var poly;
		if (thickness != 0) {
			poly = svg_drawing.rect(transform_coord_x(thickness), board_h);
			poly.fill(fill_style_board);
		}
		else {
			poly = svg_drawing.line(0, 0, 0, board_h);
		}
		poly.move(x0 + transform_coord_x(marker1), 10)
			.stroke(line_style);

	}

}

	function spacing_1_1() { $("#spacing").val($("#thickness").val()); update_calculation(); }
	function spacing_2_1() { $("#spacing").val($("#thickness").val()/2); update_calculation(); }
	function margin_1_1() { $("#margin").val($("#spacing").val()); update_calculation(); }
	function margin_2_1() { $("#margin").val($("#spacing").val()/2); update_calculation(); }

$(function() {
	svg_drawing = SVG('drawing').size('100%', 100)
	preload_values();
	update_calculation();
	$(".target").change(update_calculation);
	$("#btn-update").click(update_calculation);
	$("#spacing_1_1").click(spacing_1_1);
	$("#spacing_2_1").click(spacing_2_1);
	$("#margin_1_1").click(margin_1_1);
	$("#margin_2_1").click(margin_2_1);
});
});
	</script>


</head>

<body>
<div class="container">

	<h1>Calculate equidistant board layout</h1>
	You want to lay out n boards with equal width and equal spacing?

	
<div class="btn-group btn-group-toggle" data-toggle="buttons">
  <label class="btn btn-secondary active">
    <input type="radio" name="options" id="btn-mode-total" autocomplete="off" checked> Total
  </label>
  <label class="btn btn-secondary">
    <input type="radio" name="options" id="btn-mode-spacing" autocomplete="off"> Spacing
  </label>
</div>



	<h2>Input</h2>
	
	<div class="float-right">
		<button type="button" class="btn btn-primary d-print-none" id="btn-update">Update</button>
	</div>
	

	<div class="form-group row">
		<label for="thickness" class="col-3 col-form-label">thickness:</label>
   		<div class="col-9">
		        <input id="thickness" type="number" placeholder="thickness" class="form-control target" min="0">
   	 	</div>
  	</div>
	<div class="form-group row">
    		<label for="spacing" class="col-3 col-form-label">spacing:</label>

		<div class="input-group col-9">
			<input type="number" class="form-control target" placeholder="spacing" id="spacing"  min="0">
  			<div class="input-group-append">
    				<button class="btn btn-outline-secondary" type="button" id="spacing_1_1">1:1</button>
    				<button class="btn btn-outline-secondary" type="button" id="spacing_2_1">2:1</button>
  			</div>
		</div>
  	</div>
	
	
	
	<div class="form-group row">
    		<label for="margin" class="col-3 col-form-label">margin:</label>
		<div class="input-group col-9">
	    		<input type="number" class="form-control target" id="margin" min="0">
  			<div class="input-group-append">
    				<button class="btn btn-outline-secondary" type="button" id="margin_1_1">1:1</button>
    				<button class="btn btn-outline-secondary" type="button" id="margin_2_1">2:1</button>
  			</div>
		</div>

	</div>
	<div class="form-group row">
    		<label for="count" class="col-3 col-form-label">count:</label>
   		<div class="col-9">
    			<input type="number" class="form-control target" id="count" min="0">
   	 	</div>
  	</div>    
	
	
	<div class="form-group row">
    		<label for="width_single" class="col-3 col-form-label">width board+spacing:</label>
   		<div class="col-9">
    			<input type="number" class="form-control" id="width_single" readonly>
   	 	</div>
  	</div>
	<div class="form-group row">
	  	<label for="width_total" class="col-3 col-form-label">total width:</label>
		<div class="col-9">
    			<input type="number" class="form-control" id="width_total" readonly>
   	 	</div>
  	</div>
	

	<div id="drawing" class="center-block"></div>

	<div class="avoid-page-break">
		<h2>Markers</h2>
    	    	
		<table id="markers" class="table table-striped table-condensed" style="width:100%">
        		<thead>
				<tr><th>No.</th><th>Position L</th><th>Position R</th></tr>
        		</thead>
        		<tbody></tbody>
     		</table>
	</div>
    
	<div class="d-print-none">
		<h2>About</h2>
		<a href="https://github.com/mru00/board-layout">Repository</a>
	</div>
	
	
	</div>

	
	</body>
</html>
